名前: JoinBot
説明: JoinBot の理解と使用

![DALL·E – samourai robot in a red forest, 3D render](assets/cover.jpeg)

# 友達がいない場合、JoinBot を使用してください！

JoinBot は、有名なビットコインウォレットソフトウェアである Samourai Wallet の最新バージョン 0.99.98f に追加された新しいツールです。パートナーを見つける必要なく、簡単に共同取引を行い、プライバシーを最適化することができます。

** 素晴らしいアイデアを提供してくれた Fanis Michalakis に感謝します！ **

## ビットコインにおける共同取引とは何ですか？

ビットコインは、分散型かつ透明なアカウントレジスター上に構築されています。この電子キャッシュシステムのユーザーのトランザクションは、誰でも追跡することができます。一定のプライバシーを確保するために、ビットコインのユーザーは特定の構造を持つトランザクションを行うことができます。これにより、トランザクションの解釈において否認可能性を追加することができます。

情報を直接隠すのではなく、他の情報と混同することが目的です。これは、特に Coinjoin で使用される手法です。Coinjoin は、ビットコイン上のコインの履歴を分断し、追跡を困難にするトランザクションです。この結果を得るためには、トランザクション内に同じ金額の複数の入力と出力を作成する必要があります。

入力はビットコイントランザクションの入力を表し、出力は出力を表します。トランザクションは、入力を消費して新しい出力を作成し、コインの支出条件を変更することで、ビットコインをユーザー間で移動させる仕組みです。
詳細については、この記事で詳しく説明しています：ビットコイントランザクションの仕組み：UTXO、入力、出力。

ビットコインのトランザクションを追跡する際にトレースを混乱させる方法の一つは、共同取引を行うことです。その名前が示すように、共同取引は複数のユーザー間での合意に基づいて行われます。各ユーザーは同じトランザクションの入力としてビットコインを預け入れ、出力として一定の金額を受け取ります。

先ほど述べたように、最も一般的な共同取引の構造は Coinjoin です。たとえば、Coinjoin Whirlpool プロトコルでは、トランザクションには 5 人の参加者が同じ金額のビットコインを入力と出力として持ちます。

![Whirlpool上のCoinjoinトランザクションのスキーマ](assets/1.jpeg)

このトランザクションの外部の観察者は、どの出力がどの入力ユーザーに属しているかを特定することができません。例えば、ユーザー番号 4（紫）の場合、彼の UTXO を入力として認識することはできますが、5 つの出力のうち実際に彼のものであるかどうかはわかりません。元の情報は隠されていませんが、グループ内で混同されています。
ユーザーは、特定の UTXO の所有を否定することができます。これは「プラウジブルな否認」と呼ばれ、透明なビットコイントランザクションで機密性を実現することができます。
Coinjoin について詳しく知りたい場合は、この長い記事で全てを説明します：Bitcoin での CoinJoin の理解と使用。

UTXO のトレースを防ぐために非常に効果的ですが、Coinjoin は直接支出には適していません。実際、その構造は事前に定義された金額のインプットと同じ値のアウトプット（マイニング手数料を除く）を使用する必要があります。しかし、ビットコインの支出トランザクションは、ユーザーと彼のオンチェーンの活動との物理的な関係をしばしば示す重要な瞬間です。したがって、支出には機密性のツールを使用することが重要です。そのため、実際の支払いトランザクションに特化した他の共同トランザクション構造が存在します。

## StonewallX2 トランザクション

Samourai Wallet で提供されている多くの支出ツールの中には、支払いに特化した共同トランザクションである StonewallX2 トランザクションがあります。外部から見ると、このトランザクションは複数の可能な解釈につながることがあります。したがって、ユーザーにとってはプラウジブルな否認とそれに伴う機密性があります。

この StonewallX2 共同トランザクションの仕組みは、Samourai Wallet と Sparrow Wallet の両方で利用できます。このツールは両方のソフトウェア間で相互運用可能です。

その仕組みは非常に簡単です。以下に実際の動作を示します：

> - ユーザーはビットコインで支払いを行いたい（例：商人での支払い）。
> - 実際の受信アドレス（商人）を取得します。
> - 複数のインプットを使用して特定のトランザクションを構築します：少なくとも 1 つはユーザー自身のものであり、もう 1 つは外部の共同作業者のものです。
> - トランザクションには 4 つのアウトプットがあり、そのうち 2 つは同じ金額です：支払い先のアドレスに支払い、ユーザーに戻るお釣り、共同作業者に向かう支払いと同じ金額のアウトプット、および共同作業者に戻る別のアウトプット。

例えば、以下は私が 50,125 sats の支払いを行った典型的な StonewallX2 トランザクションです。最初のインプットは 102,588 sats で、私の Samourai ウォレットから来ています。2 番目のインプットは 104,255 sats で、共同作業者のウォレットから来ています：

![StonewallX2トランザクションの図](assets/2.jpeg)

トレースを混乱させるために、2 つの同じ金額のアウトプットが観察できます：

> - 50,125 sats は実際の支払先に送られます。
> - 52,306 sats はお釣りを表し、私のウォレットのアドレスに戻ります。
> - 50,125 sats は共同作業者に戻ります。

- 私の共同作業者に戻ってくる 53,973 サトシ。
  操作の終わりに、共同作業者は元の残高全体を取り戻します（マイニング手数料を除く）。そして、ユーザーは商人に支払いを行います。これにより、トランザクションに非常に多くのエントロピーを追加し、送信者と支払いの受取人の間の明白な関係を断ち切ることができます。

StonewallX2 タイプのトランザクションの強みは、チェーンのアナリストが使用する経験則の 1 つである、マルチインプットトランザクションにおけるインプットの共有性を完全に打ち消すことです。言い換えれば、ほとんどの場合、複数のインプットを持つビットコインのトランザクションを観察すると、これらのインプットが同じ人物に属していると推定できます。サトシ・ナカモトは彼のホワイトペーパーで、ユーザーのプライバシーのためにこの問題を既に認識していました。

> "さらなるファイアウォールとして、各トランザクションに新しいキーペアを使用して、それらを共通の所有者に関連付けないようにすることができます。ただし、マルチインプットトランザクションでは、そのインプットが同じ所有者によって保持されていたことを必然的に明らかにします。"

これは、アドレスクラスターを構築するためのオンチェーン分析で使用される多くの経験則の 1 つです。これらのヒューリスティックスについて詳しく知りたい場合は、この Samourai の 4 つの記事シリーズを読むことをお勧めします。

StonewallX2 トランザクションの強みは、外部の観察者がトランザクションの異なるインプットが共通の所有者に属していると思うことです。実際には、異なる 2 人のユーザーが協力しています。したがって、支払いの分析は誤解に導かれ、ユーザーのプライバシーが保護されます。

外部から見ると、StonewallX2 トランザクションは Stonewall トランザクションと区別することはできません。これらの間の実際の違いは、Stonewall が協力的ではないということです。それは単に同じユーザーの UTXO のみを使用します。しかし、アカウントレジスタ上の構造では、Stonewall と StonewallX2 は完全に同じです。したがって、外部の観察者は、インプットが同じ人物から来たのか、2 人の共同作業者から来たのかを知ることはできません。

次に、Stowaway タイプの PayJoin に比べて、StonewallX2 の利点は、あらゆる状況で使用できることです。実際の支払いの受取人はトランザクションにインプットを入れません。したがって、Samourai や Sparrow を使用していない場合でも、StonewallX2 を Bitcoin を受け入れるどの商人に対しても使用することができます。
一方、このトランザクションの主な欠点は、ビットコインを使用して支払いに参加するための協力者が必要であることです。もし常にあなたを助けてくれるビットコインの友人がいる場合、これは問題ありません。しかし、Samourai Wallet の他のユーザーを知らない場合、または協力する人がいない場合、あなたは行き詰まってしまいます。

ただし、Samourai のユーザーと協力することができる Telegram グループが存在します。ここをクリックすることで参加することができます。

この問題を解決するために、Samourai のチームは最近、アプリケーションに新機能である JoinBot を追加しました。

# JoinBot とは何ですか？

JoinBot の原則は簡単です。StonewallX2 トランザクションのための協力者が見つからない場合、JoinBot と協力することができます。具体的には、実際には Samourai Wallet と直接協力して共同のトランザクションを行います。

このサービスは非常に便利であり、特に初心者のユーザーにとっては 24 時間 365 日利用可能です。緊急の支払いを行いたい場合や StonewallX2 を行いたい場合、友人に連絡する必要がなく、オンラインで協力者を探す必要もありません。JoinBot がサポートします。

JoinBot のもう一つの利点は、提供される UTXO が Whirlpool のポストミックスからのものであるため、支払いの機密性が向上することです。さらに、JoinBot は常にオンラインであるため、将来の広範な Anonset を持つ UTXO と協力するはずです。

もちろん、JoinBot にはいくつかの妥協点があります：

> 通常の StonewallX2 と同様に、協力者は使用される UTXO とその宛先を知っています。JoinBot の場合、Samourai はこのトランザクションの詳細を知っています。これは必ずしも悪いことではありませんが、心に留めておく必要があります。
> スパムを防ぐために、Samourai は実際のトランザクション金額からサービス手数料として 3.5%を徴収しますが、上限は 0.01 BTC です。例えば、JoinBot を使用して 100 キロサットの実際の支払いを送信する場合、手数料は 3,500 サットになります。
> JoinBot を使用するには、少なくとも 2 つの関連しない UTXO がウォレットに利用可能である必要があります。
> 通常の StonewallX2 では、マイニング手数料は 2 人の協力者間で公平に分担されます。JoinBot の場合、あなたは当然ながらマイニング手数料を全額支払う必要があります。
> JoinBot のトランザクションが通常の StonewallX2 トランザクションや通常の Stonewall トランザクションとまったく同じになるようにするために、サービス料金の支払いは完全に別のトランザクションで行われます。最初に Samourai が支払ったマイニング手数料の半額は、この 2 番目のトランザクションで返金されます。プライバシーを最大限に保護するために、料金の支払いは Stowaway（PayJoin）構造のトランザクションを使用して行われます。

## JoinBot の使用方法

JoinBot トランザクションを行うには、Samourai Wallet のウォレットが必要です。こちらからダウンロードするか、Google Playstore から入手できます。

Samourai が開発したツールのほとんどとは異なり、現時点では Sparrow Wallet はまだ JoinBot の実装を発表していません。したがって、このツールは Samourai でのみ利用可能です。

このビデオで JoinBot を使用して StonewallX2 トランザクションをステップバイステップで実行する方法をご覧ください：

![Joinbotの使用方法](https://youtu.be/80MoMz2Ne5g)

以下は、ビデオで実行したトランザクションのスキーマです：

![JoinBotを使用したStonewallX2トランザクションのスキーマ。](assets/3.jpeg)

このスキーマでは、5 つのインプットが確認できます：

> - Samourai（JoinBot）からの 100 キロサットの 3 つのインプット。
> - 私の個人ウォレットからの 3,524 サットと 1.8 メガサットの 2 つのインプット。

トランザクションの 4 つのアウトプットは次のとおりです：

> - 実際の支払先への 212,452 サットの 1 つ。
> - 同額の別のアウトプットが Samourai のアドレスに戻ります。
> - 87,302 サットのために Samourai に戻るおつり。これは、彼らのインプットの合計（300,000 サット）とオフスキュレーションのアウトプット（212,452 サット）からマイニング手数料を差し引いたものです。
> - 私のウォレットの別のアドレスに戻るおつり。これは、私のインプットの合計と実際の支払い額からマイニング手数料を差し引いたものです。

マイニング手数料はトランザクションのアウトプットではありません。それらは単にインプットの合計とアウトプットの合計の差を表しています。

## 結論

JoinBot は、Samourai のユーザーにさらなる選択肢と自由を提供する追加のツールです。Samourai との共同作業として直接 StonewallX2 トランザクションを実行することができます。このタイプのトランザクションはユーザーのプライバシーを向上させるのに役立ちます。

友達と通常の StonewallX2 トランザクションを行うことができる場合でも、このツールの使用をお勧めします。ただし、支払いを行うための共同作業者が見つからずに困っている場合は、JoinBot が 24 時間 365 日利用可能であることを知っています。

> 外部リソース：

- https://medium.com/oxt-research/understanding-bitcoin-privacy-with-oxt-part-1-4-8177a40a5923
- https://youtu.be/vhUREWiY570
- https://docs.samourai.io/wallet/privacy-enhanced-transactions
- https://www.pandul.fr/post/comprendre-et-utiliser-le-coinjoin-sur-bitcoin
