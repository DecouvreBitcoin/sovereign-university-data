名前: JoinBot
説明: JoinBotの理解と使用

![DALL·E – samourai robot in a red forest, 3D render](assets/cover.jpeg)

# 友達がいない場合、JoinBotを使用してください！

JoinBotは、有名なビットコインウォレットソフトウェアであるSamourai Walletの最新バージョン0.99.98fに追加された新しいツールです。パートナーを見つける必要なく、簡単に共同取引を行い、プライバシーを最適化することができます。

** 素晴らしいアイデアを提供してくれたFanis Michalakisに感謝します！ **

## ビットコインにおける共同取引とは何ですか？

ビットコインは、分散型かつ透明なアカウントレジスター上に構築されています。この電子キャッシュシステムのユーザーのトランザクションは、誰でも追跡することができます。一定のプライバシーを確保するために、ビットコインのユーザーは特定の構造を持つトランザクションを行うことができます。これにより、トランザクションの解釈において否認可能性を追加することができます。

情報を直接隠すのではなく、他の情報と混同することが目的です。これは、特にCoinjoinで使用される手法です。Coinjoinは、ビットコイン上のコインの履歴を分断し、追跡を困難にするトランザクションです。この結果を得るためには、トランザクション内に同じ金額の複数の入力と出力を作成する必要があります。

入力はビットコイントランザクションの入力を表し、出力は出力を表します。トランザクションは、入力を消費して新しい出力を作成し、コインの支出条件を変更することで、ビットコインをユーザー間で移動させる仕組みです。
詳細については、この記事で詳しく説明しています：ビットコイントランザクションの仕組み：UTXO、入力、出力。

ビットコインのトランザクションを追跡する際にトレースを混乱させる方法の一つは、共同取引を行うことです。その名前が示すように、共同取引は複数のユーザー間での合意に基づいて行われます。各ユーザーは同じトランザクションの入力としてビットコインを預け入れ、出力として一定の金額を受け取ります。

先ほど述べたように、最も一般的な共同取引の構造はCoinjoinです。たとえば、Coinjoin Whirlpoolプロトコルでは、トランザクションには5人の参加者が同じ金額のビットコインを入力と出力として持ちます。

![Whirlpool上のCoinjoinトランザクションのスキーマ](assets/1.jpeg)

このトランザクションの外部の観察者は、どの出力がどの入力ユーザーに属しているかを特定することができません。例えば、ユーザー番号4（紫）の場合、彼のUTXOを入力として認識することはできますが、5つの出力のうち実際に彼のものであるかどうかはわかりません。元の情報は隠されていませんが、グループ内で混同されています。
ユーザーは、特定のUTXOの所有を否定することができます。これは「プラウジブルな否認」と呼ばれ、透明なビットコイントランザクションで機密性を実現することができます。
Coinjoinについて詳しく知りたい場合は、この長い記事で全てを説明します：BitcoinでのCoinJoinの理解と使用。

UTXOのトレースを防ぐために非常に効果的ですが、Coinjoinは直接支出には適していません。実際、その構造は事前に定義された金額のインプットと同じ値のアウトプット（マイニング手数料を除く）を使用する必要があります。しかし、ビットコインの支出トランザクションは、ユーザーと彼のオンチェーンの活動との物理的な関係をしばしば示す重要な瞬間です。したがって、支出には機密性のツールを使用することが重要です。そのため、実際の支払いトランザクションに特化した他の共同トランザクション構造が存在します。

## StonewallX2トランザクション

Samourai Walletで提供されている多くの支出ツールの中には、支払いに特化した共同トランザクションであるStonewallX2トランザクションがあります。外部から見ると、このトランザクションは複数の可能な解釈につながることがあります。したがって、ユーザーにとってはプラウジブルな否認とそれに伴う機密性があります。

このStonewallX2共同トランザクションの仕組みは、Samourai WalletとSparrow Walletの両方で利用できます。このツールは両方のソフトウェア間で相互運用可能です。

その仕組みは非常に簡単です。以下に実際の動作を示します：

> - ユーザーはビットコインで支払いを行いたい（例：商人での支払い）。
> - 実際の受信アドレス（商人）を取得します。
> - 複数のインプットを使用して特定のトランザクションを構築します：少なくとも1つはユーザー自身のものであり、もう1つは外部の共同作業者のものです。
> - トランザクションには4つのアウトプットがあり、そのうち2つは同じ金額です：支払い先のアドレスに支払い、ユーザーに戻るお釣り、共同作業者に向かう支払いと同じ金額のアウトプット、および共同作業者に戻る別のアウトプット。

例えば、以下は私が50,125 satsの支払いを行った典型的なStonewallX2トランザクションです。最初のインプットは102,588 satsで、私のSamouraiウォレットから来ています。2番目のインプットは104,255 satsで、共同作業者のウォレットから来ています：

![StonewallX2トランザクションの図](assets/2.jpeg)

トレースを混乱させるために、2つの同じ金額のアウトプットが観察できます：

> - 50,125 satsは実際の支払先に送られます。
> - 52,306 satsはお釣りを表し、私のウォレットのアドレスに戻ります。
> - 50,125 satsは共同作業者に戻ります。
- 私の共同作業者に戻ってくる53,973サトシ。
操作の終わりに、共同作業者は元の残高全体を取り戻します（マイニング手数料を除く）。そして、ユーザーは商人に支払いを行います。これにより、トランザクションに非常に多くのエントロピーを追加し、送信者と支払いの受取人の間の明白な関係を断ち切ることができます。

StonewallX2タイプのトランザクションの強みは、チェーンのアナリストが使用する経験則の1つである、マルチインプットトランザクションにおけるインプットの共有性を完全に打ち消すことです。言い換えれば、ほとんどの場合、複数のインプットを持つビットコインのトランザクションを観察すると、これらのインプットが同じ人物に属していると推定できます。サトシ・ナカモトは彼のホワイトペーパーで、ユーザーのプライバシーのためにこの問題を既に認識していました。

> "さらなるファイアウォールとして、各トランザクションに新しいキーペアを使用して、それらを共通の所有者に関連付けないようにすることができます。ただし、マルチインプットトランザクションでは、そのインプットが同じ所有者によって保持されていたことを必然的に明らかにします。"

これは、アドレスクラスターを構築するためのオンチェーン分析で使用される多くの経験則の1つです。これらのヒューリスティックスについて詳しく知りたい場合は、このSamouraiの4つの記事シリーズを読むことをお勧めします。

StonewallX2トランザクションの強みは、外部の観察者がトランザクションの異なるインプットが共通の所有者に属していると思うことです。実際には、異なる2人のユーザーが協力しています。したがって、支払いの分析は誤解に導かれ、ユーザーのプライバシーが保護されます。

外部から見ると、StonewallX2トランザクションはStonewallトランザクションと区別することはできません。これらの間の実際の違いは、Stonewallが協力的ではないということです。それは単に同じユーザーのUTXOのみを使用します。しかし、アカウントレジスタ上の構造では、StonewallとStonewallX2は完全に同じです。したがって、外部の観察者は、インプットが同じ人物から来たのか、2人の共同作業者から来たのかを知ることはできません。

次に、StowawayタイプのPayJoinに比べて、StonewallX2の利点は、あらゆる状況で使用できることです。実際の支払いの受取人はトランザクションにインプットを入れません。したがって、SamouraiやSparrowを使用していない場合でも、StonewallX2をBitcoinを受け入れるどの商人に対しても使用することができます。
一方、このトランザクションの主な欠点は、ビットコインを使用して支払いに参加するための協力者が必要であることです。もし常にあなたを助けてくれるビットコインの友人がいる場合、これは問題ありません。しかし、Samourai Walletの他のユーザーを知らない場合、または協力する人がいない場合、あなたは行き詰まってしまいます。

ただし、Samouraiのユーザーと協力することができるTelegramグループが存在します。ここをクリックすることで参加することができます。

この問題を解決するために、Samouraiのチームは最近、アプリケーションに新機能であるJoinBotを追加しました。

# JoinBotとは何ですか？

JoinBotの原則は簡単です。StonewallX2トランザクションのための協力者が見つからない場合、JoinBotと協力することができます。具体的には、実際にはSamourai Walletと直接協力して共同のトランザクションを行います。

このサービスは非常に便利であり、特に初心者のユーザーにとっては24時間365日利用可能です。緊急の支払いを行いたい場合やStonewallX2を行いたい場合、友人に連絡する必要がなく、オンラインで協力者を探す必要もありません。JoinBotがサポートします。

JoinBotのもう一つの利点は、提供されるUTXOがWhirlpoolのポストミックスからのものであるため、支払いの機密性が向上することです。さらに、JoinBotは常にオンラインであるため、将来の広範なAnonsetを持つUTXOと協力するはずです。

もちろん、JoinBotにはいくつかの妥協点があります：

> 通常のStonewallX2と同様に、協力者は使用されるUTXOとその宛先を知っています。JoinBotの場合、Samouraiはこのトランザクションの詳細を知っています。これは必ずしも悪いことではありませんが、心に留めておく必要があります。
> スパムを防ぐために、Samouraiは実際のトランザクション金額からサービス手数料として3.5%を徴収しますが、上限は0.01 BTCです。例えば、JoinBotを使用して100キロサットの実際の支払いを送信する場合、手数料は3,500サットになります。
> JoinBotを使用するには、少なくとも2つの関連しないUTXOがウォレットに利用可能である必要があります。
> 通常のStonewallX2では、マイニング手数料は2人の協力者間で公平に分担されます。JoinBotの場合、あなたは当然ながらマイニング手数料を全額支払う必要があります。
JoinBotのトランザクションが通常のStonewallX2トランザクションや通常のStonewallトランザクションとまったく同じになるようにするために、サービス料金の支払いは完全に別のトランザクションで行われます。最初にSamouraiが支払ったマイニング手数料の半額は、この2番目のトランザクションで返金されます。プライバシーを最大限に保護するために、料金の支払いはStowaway（PayJoin）構造のトランザクションを使用して行われます。

## JoinBotの使用方法

JoinBotトランザクションを行うには、Samourai Walletのウォレットが必要です。こちらからダウンロードするか、Google Playstoreから入手できます。

Samouraiが開発したツールのほとんどとは異なり、現時点ではSparrow WalletはまだJoinBotの実装を発表していません。したがって、このツールはSamouraiでのみ利用可能です。

このビデオでJoinBotを使用してStonewallX2トランザクションをステップバイステップで実行する方法をご覧ください：

![Joinbotの使用方法](https://youtu.be/80MoMz2Ne5g)

以下は、ビデオで実行したトランザクションのスキーマです：

![JoinBotを使用したStonewallX2トランザクションのスキーマ。](assets/3.jpeg)

このスキーマでは、5つのインプットが確認できます：

> - Samourai（JoinBot）からの100キロサットの3つのインプット。
> - 私の個人ウォレットからの3,524サットと1.8メガサットの2つのインプット。

トランザクションの4つのアウトプットは次のとおりです：

> - 実際の支払先への212,452サットの1つ。
> - 同額の別のアウトプットがSamouraiのアドレスに戻ります。
> - 87,302サットのためにSamouraiに戻るおつり。これは、彼らのインプットの合計（300,000サット）とオフスキュレーションのアウトプット（212,452サット）からマイニング手数料を差し引いたものです。
> - 私のウォレットの別のアドレスに戻るおつり。これは、私のインプットの合計と実際の支払い額からマイニング手数料を差し引いたものです。

マイニング手数料はトランザクションのアウトプットではありません。それらは単にインプットの合計とアウトプットの合計の差を表しています。

## 結論

JoinBotは、Samouraiのユーザーにさらなる選択肢と自由を提供する追加のツールです。Samouraiとの共同作業として直接StonewallX2トランザクションを実行することができます。このタイプのトランザクションはユーザーのプライバシーを向上させるのに役立ちます。

友達と通常のStonewallX2トランザクションを行うことができる場合でも、このツールの使用をお勧めします。ただし、支払いを行うための共同作業者が見つからずに困っている場合は、JoinBotが24時間365日利用可能であることを知っています。

> 外部リソース：
>
- https://medium.com/oxt-research/understanding-bitcoin-privacy-with-oxt-part-1-4-8177a40a5923
- https://youtu.be/vhUREWiY570
- https://docs.samourai.io/wallet/privacy-enhanced-transactions
- https://www.pandul.fr/post/comprendre-et-utiliser-le-coinjoin-sur-bitcoin